# Cursor agent rules

- Keep `data/interim` step folders aligned with `STEP_REGISTRY` order using the `NN_step_name` pattern.
- When retaining deprecated or experimental outputs, rename their folders to start with `99_ver<timestamp>_...`, where `<timestamp>` is in `YYYYMMDD_HHMM` local time (for example `99_ver20251230_1708_split_by_type/`), so humans and automation can easily skip them and duplicate names never collide.
- For every deterministic pipeline step that emits Parquet files in `data/interim`, also create a companion inspection notebook under `notebooks/data/...` that mirrors the same directory structure and previews those outputs (shape, schema, head) so humans can quickly audit the intermediate data.
- Inspection notebooks should display ~20 rows of data transposed (columns as rows) so wide schemas remain readable, and raise `pd.options.display.max_rows` to at least 400 so transposed tables are not vertically truncated.

